:root{
  --panel-width: 420px;
  --indigo: #1e3a8a;
  --accent: #ff7a59;
}
html,body{ height:100%; margin:0; font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; }
html,body{ overflow-x:hidden; }

/* LANDING */
#landing{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
  background: linear-gradient(180deg, #dbeafe 0%, #ffffff 80%);
  z-index: 90; overflow: hidden;
}
.cloud{
  position:absolute; width:50vw; opacity:.92; pointer-events:none;
  transition: transform 3.5s ease-in-out, opacity 3.5s ease-in-out;
  filter: drop-shadow(0 20px 60px rgba(0,0,0,.15));
}
#c1{ top:10%; left:8%; transform: scale(1.2); }
#c2{ top:28%; right:8%; transform: scale(1.1); }
#c3{ bottom:8%; left:20%; transform: scale(1.3); opacity:.85; }
#c4{ bottom:20%; right:24%; transform: scale(1.2); opacity:.8; }

#plane{
  position:absolute; width:180px; left:-260px; top:58%;
  transform: rotate(-18deg);
  transition: left 5s ease-in-out, top 5s ease-in-out, transform 5s ease-in-out;
  z-index:92;
}
#welcomeCard{
  position:relative; z-index:91; text-align:center; color:#1e3a8a;
}
#welcomeCard h1{ font-size:3.4rem; margin:0; letter-spacing:3px; }
#welcomeCard p{ margin:8px 0 16px; font-weight:600; }
#startBtn{
  padding:12px 26px; font-size:1.05rem; border-radius:10px; border:0; cursor:pointer;
  background:#1e3a8a; color:white; box-shadow:0 10px 30px rgba(2,6,23,.12);
}
#startBtn:hover{ background:#312e81; }

/* MAP */
#mapReveal{ position:fixed; inset:0; display:flex; opacity:0; transition: opacity .5s ease; }
#map{
  flex:1; height:100vh; background-size:cover; background-position:center;
}
/* Leaflet clean visuals */
.leaflet-control-container { display:none; } /* hide all default controls */
.leaflet-container { background: transparent; }

/* RIGHT PANEL */
#infoPanel{
  position: fixed; right: calc(-1 * var(--panel-width)); top:0; width: var(--panel-width); height: 100vh;
  background: #f9fafb; color:#0f172a; border-left: 3px solid var(--indigo);
  box-shadow: -30px 0 80px rgba(2,6,23,.18); padding: 18px; transition: right .38s ease;
  z-index: 110; border-radius: 18px 0 0 18px; overflow-y:auto;
}
#infoPanel.open{ right:0; }
#panelHeader{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
#stateName{ font-size:1.6rem; font-weight:800; color:var(--indigo); }
#closePanel{
  background:#e2e8f0; border:0; border-radius:8px; width:36px; height:36px; font-size:18px; cursor:pointer;
}

.panelButtons{ display:flex; gap:8px; margin-top:12px; }
.panelButtons button{
  flex:1; padding:8px 10px; border-radius:10px; border:0; background:#e2e8f0; color:#0f172a; font-weight:700; cursor:pointer;
}
.panelButtons button.active{ background: #1e3a8a; color:white; }

#panelContent{
  margin-top:14px; background: white; color:#0f172a;
  border-radius:10px; padding:12px; box-shadow: 0 10px 30px rgba(2,6,23,.08);
}
.hint{ color:#475569; }

.spotCard{ margin-bottom:12px; border-radius:10px; overflow:hidden; background:white; box-shadow:0 10px 20px rgba(2,6,23,.06); }
.spotCard img{ width:100%; height:150px; object-fit:cover; display:block; }
.spotCard .meta{ padding:10px; }

.precautions-grid{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
.prec-box{ background:#eef2ff; padding:12px; border-radius:10px; }
.prec-box h4{ margin:0 0 6px 0; color:#1e3a8a; }

/* Tooltip for state names */
.leaflet-tooltip.state-tip{
  background: rgba(255,255,255,.95);
  border: 1px solid #1e3a8a;
  color:#0f172a;
  font-weight: 800;
  border-radius: 6px;
  padding: 4px 8px;
  box-shadow: 0 8px 20px rgba(2,6,23,.12);
}

/* Make map background image show if provided */
#map.has-bg::before{
  content:"";
  position:absolute; inset:0;
  background-size: cover; background-position:center;
  opacity:.18; pointer-events:none;
}

/* Safety: crop ANY weird overlay from extensions/widgets */
iframe[style*="right"], div[style*="right"], div[class*="chat"], div[class*="widget"], div[class*="feedback"]{
  display:none !important;
}

/* responsive */
@media (max-width:900px){
  :root{ --panel-width: 92%; }
  #welcomeCard h1{ font-size:2.4rem; }
  .cloud{ width:60vw; }
  #plane{ width:140px; }
}

.leaflet-interactive:hover {
  filter: drop-shadow(0 0 6px rgba(30,58,138,0.8)); /* subtle glow */
  cursor: pointer;
}
